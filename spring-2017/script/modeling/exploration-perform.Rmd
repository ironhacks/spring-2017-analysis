---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
df <- read.csv("input/exploration-perform.csv", header =TRUE, sep=",")
df <- df[complete.cases(df), ]                  # Apply complete.cases function
df
```

```{r}
# create new columns called log exploration
df$log_exploration <- log(df$exploration+1) 
df$log_count <- log(df$count+1) 
df$log_perform_dist <- log(df$abs_perform_diff_best+1) 
df
```

```{r}
# standardizing variables for skills and aspirations. 
cols <- c("Q7_Q7_1", "Q7_Q7_2", "Q8_Q8_1", "Q10", "log_exploration", "log_count", "log_perform_dist")
df[cols] <- scale(df[cols])
df
```

```{r}
df$group = factor(df$group)
df$phase = factor(df$phase)
```

```{r}
# stage nested within group 
nested.model = lmer( log_exploration ~ group + (1 | user2 ) + (1 | log_perform_dist) + ( 1 | phase), data = df, REML = FALSE)
summary(nested.model)
```

